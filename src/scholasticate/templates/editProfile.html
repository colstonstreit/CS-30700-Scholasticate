{% extends "base.html" %}
{% block title %} Edit Profile {% endblock %}
{% block content %}

<p id="allClothingItems" style="display: none;">{{ allClothingItems }}</p>
<p id="availabilityList" style="display: none;">{{ availabilityList }}</p>
<p id="studentInfo" style="display: none;">{{ studentInfo }}</p>

<style>
  h2 {
    font-size: 18px;
  }
</style>

<div style="text-align: center;">
  <h1>Edit your profile</h1>
  <form method="POST" action="{{ url_for('editProfile_Post', id=profileID) }}">
    <!-- Uploading files for profile picture -->
    <img id="profilePicture" name="profilePicture" src="" width="300" height="300"><br><br>
    <label for="profilePictureFile">Upload a new profile picture:</label>
    <input type="text" id="basePhotoString" name="basePhotoString" style="display: none;">
    <input type="file" id="profilePictureFile" name="profilePictureFile" accept="image/png, image/jpeg"
      onchange="document.getElementById('profilePicture').src = window.URL.createObjectURL(this.files[0]); convertImage(this.files[0]);">
    <label for="name">
      <h2>Name</h2>
    </label>
    <input type="text" id="name" name="name"><br><br>
    <label for="school">
      <h2>School</h2>
    </label>
    <select id="school" name="school" disabled>
      <option selected value="1">Purdue University</option>
      <!-- These will be generated by passing schools in -->
    </select><br><br>
    <label for="bio">
      <h2>Bio</h2>
    </label>
    <textarea id="bio" name="bio" cols="50" rows="5"></textarea><br><br>


    <h2>Update Wardrobe</h2>
    <label for="clothingName">Enter clothing type: </label>
    <input type="text" id="clothingName"><br>
    <label for="clothingBrand">Enter brand, if applicable: </label>
    <input type="text" id="clothingBrand"><br>
    <p>Input color using the sliders provided below</p>

    <label for="redSlider">Red</label>
    <input style="background:red;" type="range" default="0" min="0" max="255" step="1" id="redSlider"
      onchange="updateRedText(this.value); updateBoxColor();"></input>
    <label for="redSlider" id="redText">0</label>

    <label for="greenSlider">Green</label>
    <input style="background:green;" type="range" default="0" min="0" max="255" step="1" id="greenSlider"
      onchange="updateGreenText(this.value); updateBoxColor();"></input>
    <label for="greenSlider" id="greenText">0</label>

    <label for="blueSlider">Blue</label>
    <input style="background:blue;" type="range" default="0" min="0" max="255" step="1" id="blueSlider"
      onchange="updateBlueText(this.value); updateBoxColor();"></input>
    <label for="blueSlider" id="blueText">0</label><br><br>
    <p id="colorText" style="display: none;"></p>

    <svg width="200" height="20">
      <rect id="colorPreview" width="200" height="20" style="fill:#FFFFFF;stroke-width:3;stroke:rgb(0,0,0)" />
    </svg><br><br>
    <button class="button ripple" type="button" id="clothingSubmit" onclick="updateWardrobeList()">Add</button>

    <div id="wardrobeEdit">
      <style>
        td,
        th {
          border: 1px solid black;
          padding: 5px;
          text-align: center;
        }
      </style>
      <br>
      <table class="center" id="wardrobeList" width="500"
        style="margin-left: auto; margin-right: auto; border: 1px solid black;"></table><br><br>
    </div>

    <h2>Courses</h2>

    <label for="courseFilter">Search for Course: </label>
    <input type="text" id="courseFilter" oninput="updateCourseSelectDropdown();"><br>

    <select id="courseSelect" onchange="toggleCourse(this.value); this.selectedIndex = 0;">
      <!-- Automatically generate courses -->
    </select><br><br>

    <style>
      td,
      th {
        border: 1px solid black;
        padding: 5px;
        text-align: center;
      }
    </style>
    <table class="center" id="selectedCoursesList" width="500" style="border: 1px solid black;"></table>
    <br><br>
    <table class="center" id="selectedHistoryList" width="500" style="text-align:center; border: 1px solid black;">
    </table>
    <br><br>

    <input type="text" id="courseIds" name="courseIds" style="display: none;">
    <input type="text" id="courseHistoryIds" name="courseHistoryIds" style="display: none;">
    <input type="text" id="newClothingItems" name="newClothingItems" style="display: none;">
    <input type="text" id="newAvailabilities" name="newAvailabilities" style="display:none;">

    <div id="availabilityDiv">
      <p>Add to your availability:</p>
      <label for="day">Day:</label>
      <select id="day">
        <option>Sunday</option>
        <option>Monday</option>
        <option>Tuesday</option>
        <option>Wednesday</option>
        <option>Thursday</option>
        <option>Friday</option>
        <option>Saturday</option>
      </select><br>
      <label for="startTime">Start Time: </label>
      <input type="text" id="startTime" placeholder="HH:MM"><br>
      <label for="endTime">End Time: </label>
      <input type="text" id="endTime" placeholder="HH:MM"><br><br>
      <button class="button ripple" onclick="addTime();" form="none">Add</button>
      <h2>Update Availability</h2>
      <table class="center" id="availability" width="500" style="text-align: center; border: 1px solid black;"></table>
      <br><br>
    </div>

    <button class="button ripple" type="submit" id="submit">Submit changes</button>

  </form>

  <script defer src="{{ url_for('static', filename='editProfile.js') }}" onload="onLoad();"></script>

  <br>
  <form method="POST" action="{{ url_for('deactivateAccount', id=profileID) }}">
    <button class="button ripple" type="submit" id="deactivate">Deactivate Account</button><br><br>
  </form>
</div>

{% endblock %}